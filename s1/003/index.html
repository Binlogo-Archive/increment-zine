<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
<title>003｜Telegram-iOS 源码导读</title>
    <meta name="description" content="源码阅读, Telegram, 魔法法则, 最好的 Rust 课程">
    <meta property="og:type" content="website">
    <meta property="og:title" content="003｜Telegram-iOS 源码导读">
    <meta property="og:description" content="源码阅读, Telegram, 魔法法则, 最好的 Rust 课程">
    <meta name="twitter:title" content="003｜Telegram-iOS 源码导读">
    <meta name="twitter:description" content="源码阅读, Telegram, 魔法法则, 最好的 Rust 课程">

<meta property="og:url" content="https://binlogo.github.io/increment-zine/s1/003">
    <meta property="twitter:url" content="https://binlogo.github.io/increment-zine/s1/003">

    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:image" content="https://binlogo.github.io/increment-zine/static/season-1/003/telegram.jpeg">
    <meta name="twitter:image" content="https://binlogo.github.io/increment-zine/static/season-1/003/telegram.jpeg">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="https://binlogo.github.io/increment-zine/static/zine.css">
    <link rel="alternate" type="application/atom+xml" title="棒棒彬·数字科技参考·杂志 RSS" href="/feed.xml">
    <style>
      :root {
          --primary-color: #FF7700;
          --main-color: #ffffff;
          --link-color: #CC0000;
          --secondary-color: #eff3f7;
      }
    </style>
</head>

<body class="h-full bg-secondary">
    <div class="bg-primary text-main font-bold text-center z-0" style="background-image: url('https://binlogo.github.io/increment-zine/static/flat-mountains.svg')">
    <header class="p-8 md:p-10">
            <div class="text-4xl lg:text-5xl"><a href="https://binlogo.github.io/increment-zine/">棒棒彬·数字科技参考·杂志</a></div>

            <ul>
                <li class="inline-block mt-6 mx-5 text-base hover:underline"><a href="https://binlogo.github.io/increment-zine/about">关于</a></li>
                </ul>
        </header>
        <div class="w-full h-32 md:h-36 lg:h-44 xl:h-48 2xl:h-56"></div>
    </div>

    <main class="pb-10 -translate-y-32
                 md:-translate-y-32 lg:-translate-y-36 xl:-translate-y-44 2xl:-translate-y-56
                 mx-auto sm:max-w-scree-md md:max-w-screen-lg">
            <div class="p-4 pb-10 md:p-8 md:pb-14 mx-4 my-6 bg-white 
            shadow-xl shadow-slate-700/10 ring-1 ring-gray-900/5">
    <div class="relative mx-2">
        <a class="before:block before:absolute before:-inset-1 before:-skew-x-6 before:bg-primary relative inline-block
                                transition sm:hover:scale-110 duration-500" href="https://binlogo.github.io/increment-zine/s1">
            <div class="relative text-main px-4">第一季</div>
        </a>
        <span class="ml-2 text-gray-700"> /  第 ⁨3⁩ 篇</span>
    </div>
    <div class="mt-4 mb-8 w-full border-dashed border-t border-slate-300"></div>
    <div class="prose mx-auto">
        <h1 class="text-center">003｜Telegram-iOS 源码导读</h1>
        <div class="relative text-sm text-gray-400">
            <span>2021-10-09</span>
            <span class="absolute right-2">Binlogo</span>
        </div>
    </div>
    <article class="prose mx-auto my-12">
        <h2 id="关键字" class="flex group">
    <span>关键字</span>
    <a href="#关键字" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h2>
<p>源码阅读, Telegram, 魔法法则, 最好的 Rust 课程</p>
<h2 id="见闻与碎碎念" class="flex group">
    <span>见闻与碎碎念</span>
    <a href="#见闻与碎碎念" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h2>
<ul>
<li>
<p>国庆假期发现小米盒子还可以安装百度云盘，闲着当剧一样看了下收藏陈年的《产品经理课程》</p>
</li>
<li>
<p>产品经理：能够<strong>独当一面</strong>做好让<strong>用户</strong>满意的<strong>产品</strong>的人</p>
<ul>
<li>
<p>核心工作：决定什么是“正确的事”，推动做好“正确的事”</p>
</li>
<li>
<p>核心能力： </p>
<ul>
<li>同理心，换位思考</li>
<li>清晰深刻的<strong>思维</strong>，极简主义：或许不可以增长智商，但可以简化问题</li>
<li>大视野</li>
<li>组建一个没有短板的团队</li>
</ul>
</li>
</ul>
</li>
<li>
<p>陈天老师在哔哩哔哩上的 Rust 培训课程，讲得真的太棒了，送出了首次一键三连（哔哩哔哩看得不多 🙈</p>
<ul>
<li>用其中提及到的学习提升循环，添加更新到了<a href="https://binlogo.github.io/Knowledge-Track/meta/meta.html">知识体系元</a>
<img src="https://binlogo.github.io/increment-zine/static/season-1/003/improve-cycle.png" alt="" loading="lazy"></li>
</ul>
</li>
<li>
<p>开始将<a href="https://binlogo.github.io/Knowledge-Track/life/life.html">生活</a>的一些事务与知识也记录到第二大脑，随着逐渐迈入中年和未来的婚姻，想必会逐渐加重权重吧</p>
</li>
<li>
<p><a href="https://www.bilibili.com/video/BV1uT4y1T74A">三种方法，与孩子一起做正念 | 约格 《生命·成长》第二季 · 此念</a></p>
</li>
</ul>
<h1 id="技术新知与温故备忘" class="flex group">
    <span>技术新知与温故备忘</span>
    <a href="#技术新知与温故备忘" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h1><h3 id="书籍" class="flex group">
    <span>书籍</span>
    <a href="#书籍" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h3>
<ul>
<li>苹果技术说明：《<a href="https://developer.apple.com/av-foundation/Incorporating-HDR-video-with-Dolby-Vision-into-your-apps.pdf">Incorporating HDR video with Dolby Vision into your apps</a>》 - 支持杜比视界的 HDR</li>
</ul>
<h3 id="视频" class="flex group">
    <span>视频</span>
    <a href="#视频" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h3>
<ul>
<li>
<p>SwiftUI on the Mac - WWDC21 编程临摹课程，开发 macOS App 变得更易上手了</p>
<ul>
<li><a href="https://developer.apple.com/wwdc21/10062/">10062: SwiftUI on the Mac: Build the Fundamentals</a>
<ul>
<li><a href="https://developer.apple.com/wwdc21/10289/">10289: SwiftUI on the Mac: The Finishing Touches</a></li>
<li>示例代码：<a href="https://developer.apple.com/documentation/swiftui/building_a_great_mac_app_with_swiftui">Building a Great Mac App with SwiftUI</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=QoatPlzc0-Y&amp;ab_channel=Rust">Rust &amp; Tell Berlin September 2021 - Bastian Gruber: Learning Rust - One tutorial to rule them all</a></p>
</li>
<li>
<p><a href="https://git.sr.ht/%7Egruberb/onetutorial">onetutorial</a> - Rust 快速实践（🌟 新手强烈推荐）</p>
</li>
<li>
<p><a href="https://www.bilibili.com/video/BV19b4y1o7Lt">程序君的 Rust 培训（1）哔哩哔哩</a> </p>
<ul>
<li>最好的中文 Rust 课程，几乎没有之一
<ul>
<li>共两期，每期差不多 4 个小时，加起来约 8 小时，一气呵成</li>
<li>陈天老师讲得深入浅出，把诸多复杂的概念通过图画的方式解释得浅显易懂</li>
<li>「如果学习 Rust 的痛苦是 100%，编译器帮你降低了 10%」，那么这门课至少可以帮忙降低 30+%</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=T9vRBioadYc">The Laws of Magic - YouTube</a> - 以魔法法则的方式介绍软件系统设计的一些原则 ([演讲 PDF](https://github.com/tryswift/tokyo2019slides/blob/master/DaveDeLong/The Laws of Magic.pdf))</p>
<ul>
<li>为什么说是魔法？ </li>
<li>任何足够先进的技术都与魔法无异</li>
<li>魔法第一法则：作者用魔法解决问题的能力与读者对魔法的理解程度成正比
<ul>
<li>魔法第二法则：限制 &gt; 权限</li>
<li>魔法第三法则：在添加新内容之前优先考虑扩展您已有的内容</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="开源" class="flex group">
    <span>开源</span>
    <a href="#开源" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h3>
<ul>
<li><a href="https://github.com/apple/swift-docc">Swift-DocC</a></li>
<li><a href="https://github.com/apple/swift-markdown">Swift-Markdown</a></li>
<li><a href="https://github.com/dotenv-rs/dotenv">dotenv-rs/dotenv</a></li>
</ul>
<h3 id="工具" class="flex group">
    <span>工具</span>
    <a href="#工具" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h3>
<ul>
<li><a href="https://transform.tools/json-to-rust-serde">JSON to Rust Serde</a> - 快速通过 JSON 生成 Rust Serde 代码</li>
<li><a href="https://sourcegraph.com">SourceGraph</a> - 代码搜索引擎，Chrome 扩展支持 GitHub 代码跳转，超好用</li>
<li><a href="https://www.raycast.com/features">Raycast</a> - 类似 Alfred 的效率工具，应用启动&amp;工作流扩展集成</li>
</ul>
<h3 id="论坛与组织" class="flex group">
    <span>论坛与组织</span>
    <a href="#论坛与组织" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h3>
<ul>
<li><a href="https://httpwg.org/">The IETF HTTP Working Group</a> - HTTP 工作组</li>
<li><a href="https://datatracker.ietf.org/">The IETF Datatracker</a> - RFC 文档查询</li>
</ul>
<h1 id="温故备忘" class="flex group">
    <span>温故备忘</span>
    <a href="#温故备忘" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h1><h3 id="网络" class="flex group">
    <span>网络</span>
    <a href="#网络" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h3>
<ul>
<li>
<p><code>TCP_NODELAY</code>选项： </p>
</li>
<li>
<p>是否禁用 Nagle 算法，开启意味着禁用</p>
<ul>
<li>对于延时敏感型，同时数据传输量比较小的应用，开启 TCP_NODELAY 选项</li>
<li>参考：<a href="https://www.zhihu.com/question/42308970">TCP连接中启用和禁用TCP_NODELAY有什么影响？</a></li>
<li>遇到过的问题： 
<ul>
<li>客户端发送「短」消息，一直等待发不出去，多发几条才陆续成功</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="常用特殊端口" class="flex group">
    <span>常用特殊端口</span>
    <a href="#常用特殊端口" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h4><table><thead><tr><th>服务、协议或应用</th><th>端口号</th><th>TCP or UDP</th></tr></thead><tbody>
<tr><td>FTP (File Transfer Protocol)</td><td>20，21</td><td>TCP</td></tr>
<tr><td>SSH (Secure Shell Protocol)</td><td>22</td><td>TCP</td></tr>
<tr><td>Telnet</td><td>23</td><td>TCP</td></tr>
<tr><td>SMTP (Simple Mail Transfer Protocol)</td><td>25</td><td>TCP</td></tr>
<tr><td>DNS (Domain Name System)</td><td>53</td><td>UDP</td></tr>
<tr><td>HTTP</td><td>80</td><td>TCP</td></tr>
<tr><td>POP3</td><td>110</td><td>TCP</td></tr>
<tr><td>IMAP4</td><td>143</td><td>TCP</td></tr>
<tr><td>HTTPS</td><td>443</td><td>TCP</td></tr>
</tbody></table>
<h3 id="xcode" class="flex group">
    <span>Xcode</span>
    <a href="#xcode" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h3>
<ul>
<li><a href="https://binlogo.github.io/Knowledge-Track/iOSDev/xcode.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6%E9%A1%B6%E9%83%A8%E6%B3%A8%E9%87%8A">自定义文件顶部注释</a></li>
</ul>
<h1 id="技术精选" class="flex group">
    <span>技术精选</span>
    <a href="#技术精选" class="ml-2 inline-flex items-center opacity-0 border-0 group-hover:opacity-100" aria-label="Anchor">
        <div class="w-6 h-6 text-slate-400 ring-1 ring-slate-900/5 rounded-md shadow-sm flex items-center justify-center hover:ring-slate-900/10 hover:shadow hover:text-slate-700">
            <svg width="12" height="12" fill="none" aria-hidden="true">
                <path d="M3.75 1v10M8.25 1v10M1 3.75h10M1 8.25h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            </svg>
        </div>
    </a>
</h1>
<p>本期精选是《Telegram-iOS 源码导读》🌟 系列文章，强烈推荐阅读，感谢 <a href="http://github.com/nixzhu">@nixzhu</a> 分享，原作者是 <a href="https://hubo.dev/">@Bo</a>。文章讲得比较细，整体篇幅非常长，共 7 篇 + 一篇后续的 Bazel 编译运行（之前 Telegram 采用 Buck 编译系统）。基本提到的技术点都会引用到具体代码行，学习项目源码的同时，可以了解到作者的源码查阅思路。目前也还在陆续阅读中，后续会更新相关的技术点整理与翻译。</p>
<ul>
<li>✅ <a href="https://hubo.dev/2020-05-07-source-code-walkthrough-of-telegram-ios-part-1/">Source Code Walkthrough of Telegram-iOS: Part 1</a></li>
<li>✅ <a href="https://hubo.dev/2020-05-11-source-code-walkthrough-of-telegram-ios-part-2/">Source Code Walkthrough of Telegram-iOS Part 2: SSignalKit</a></li>
<li>✅ <a href="https://hubo.dev/2020-05-15-source-code-walkthrough-of-telegram-ios-part-3/">Source Code Walkthrough of Telegram-iOS Part 3: Other Foundations</a></li>
<li>✅ <a href="https://hubo.dev/2020-06-05-source-code-walkthrough-of-telegram-ios-part-4/">Source Code Walkthrough of Telegram-iOS Part 4: MTProto Connections</a></li>
<li>✅ <a href="https://hubo.dev/2020-06-14-source-code-walkthrough-of-telegram-ios-part-5/">Source Code Walkthrough of Telegram-iOS Part 5: AsyncDisplayKit</a></li>
<li>✅ <a href="https://hubo.dev/2020-06-22-source-code-walkthrough-of-telegram-ios-part-6/">Source Code Walkthrough of Telegram-iOS Part 6: Bubbles</a></li>
<li>✅ <a href="https://hubo.dev/2020-07-12-source-code-walkthrough-of-telegram-ios-part-7/">Source Code Walkthrough of Telegram-iOS Part-7: Link Preview and Instant View</a></li>
<li>✅ <a href="https://hubo.dev/2020-12-28-build-and-run-telegram-ios-v7-3-on-simulator-with-bazel/">Build and Run Telegram-iOS v7.3 in Simulator with Bazel</a></li>
</ul>
<hr />
<p>感谢你的阅读，和我一起完成了本期的学习与成长。</p>
<ul>
<li>如果希望鼓励我，欢迎点赞、评论、<a href="https://www.yuque.com/binboy/increment-magzine">关注订阅</a>～</li>
<li>如果觉得有收获，也欢迎分享给身边的朋友，邀他一起交流讨论</li>
</ul>
<p>我们下期见。</p>


        </article>
    <div class="my-4 w-full border-dashed border-t border-slate-300"></div>
        <div class="flex flex-col md:flex-row">
        <a class="inline my-1 py-2 px-4 font-bold text-slate-700 hover:underline" href="https://binlogo.github.io/increment-zine/s1/002">
                    上一篇：
                    002｜CocoaPods 优化知多少？
                </a>
            <a class="inline my-1 py-2 px-4 font-bold text-slate-700 hover:underline" href="https://binlogo.github.io/increment-zine/s1/004">
                    下一篇：
                    004｜编码即写作，思考到表达
                </a>
            </div>
    </div>
</main>

    <footer class="relative">
        <footer class="bg-black text-white text-center p-16">
  <div class="text-gray-200">
    分享个人数字科技参考与见闻，<a
      class="hover:underline"
      href="https://binlogo.github.io/Knowledge-Track/"
      >棒棒彬的第二大脑</a
    >突触，以知识增量的方式，从时间维度衍生的在线杂志
  </div>
  <div class="text-gray-400 p-4">
    Copyright © 2022
    <a class="hover:underline" href="https://github.com/Binlogo">@Binlogo</a>
  </div>
</footer>

            <a href="https://github.com/zineland" 
           class="absolute z-20 bottom-0 w-full text-center font-bold
                  md:text-slate-100 md:opacity-10 md:hover:opacity-50 md:bg-transparent
                  bg-primary p-2 text-main">
            Proudly powered by Zine.
        </a>
        </div>
    </footer>
</body>
<script src="https://binlogo.github.io/increment-zine/static/medium-zoom.min.js"></script>
<script src="https://binlogo.github.io/increment-zine/static/zine.js"></script>
</html>

